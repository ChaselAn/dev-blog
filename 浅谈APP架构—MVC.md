# 浅谈APP架构—MVC

* 本文以iOS为例，Android大佬请自行理解
* 本文将简单讲讲关于APP架构的理解，以及对MVC的认识，对于iOS另一比较流行的MVVM-Rx架构会在后面为大家解析。

## 什么是APP架构

### APP反馈回路

* 在说什么是APP架构之前，我先问一个问题，APP中最核心的两个元素是什么？
* 在APP中最核心的两个元素就是数据和界面，APP其实就是将数据展现在界面上，然后通过对界面的操作来操作数据。这么一系列操作就是APP的反馈回路。

![image-20190122143047155](/Users/ancheng/Library/Application Support/typora-user-images/image-20190122143047155.png)

* 上图就是APP的反馈回路简图。View代表着界面，项目里所有继承自UIView的控件都可以看做是View，Model代表着单一数据或者是数据管理中心。View负责将数据展示出来，当View发生了操作（View Action），通过一系列内部逻辑（Model Action）改变了数据Model，Model发生改变之后再通知（Change Notification）View去更新（View Update）。这就是一套完整的APP反馈回路。

### 存在的问题

* 那么，这种只有View和Model的最基础的模式有什么问题吗？
* 首先，View如果要操作Model，有两种方式。第一种方式是View引用Model的实例对象，直接修改Model。Model修改之后也是通过引用View的实例对象，去更新View。第二种方式则是通过通知的方式，也就是观察者模式，当View发生操作之后，通知Model去修改，Model修改之后再通知View去更新。
* 这两种方式有什么问题呢，首先需要讲一下APP应该如何去设计View与Model。首先一个优秀的View，内部是不包含任何业务逻辑的，View的职责本身就是展示，View只需要提供可以供外界更新自身的方法就够了。为什么View不能包含任何业务逻辑，是因为APP本身就有很多相似的界面，这些界面大多数都是重用同一个View，而这个View在不同界面下可能包含的逻辑不同，如果改动了View的一个逻辑，可能会影响到很多不同界面，牵一发而动全身。并且View的本质只是去做展示和响应事件，它不关心任何业务逻辑，也不关心数据如何更改。同样的，Model只是负责去管理数据、处理数据，它同样不关心View的任何操作。
* 所以上面第一种方式，会使Model与View耦合在一起，又会造成相互引用，处理不好会造成内存泄漏。同时高耦合会造成两者的独立性极差。第二种方式View与Model处理了原本不属于不应属于自己的逻辑，破坏了自己的重用性。
* 知道了这些问题，怎么去解决？这就涉及到了我们的APP架构。那么什么是APP架构呢？

### APP架构的理解

* 我对APP架构的理解是，人们发现上面这些问题之后而提出的解决方案，这个方案被大部分人所认可，并达成共识。这些各种各样的方案本质上都是为了使APP项目内的代码更加健壮。
* 架构是一个APP项目的基础与核心，相当于楼房的地基。没有一个好的地基，房子很容易就造的歪歪扭扭。没有一个好的架构，或者没有严格的去遵守这些架构规则，当你的项目越来越庞大时，你会发现你的项目会越来越难以维护。

## MVC

<未完待续>